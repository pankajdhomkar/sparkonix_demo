
<div class="row">
	<h1 class="page-header">
		<img src="/assets/images/subscription.png"
			style="width: 50px; height: 50px;"></img>&nbsp; <span>Subscription Report</span>
	</h1>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
		<b>Report details</b>
	</div>
	<div class="panel-body">
	<form name="searchFilterForm">
		<div class="row">
			<div class="form-group">  
				 <div class="col-lg-4 col-md-4 col-sm-4">				 		 
					<label>AttendMe Subscription End Date</label>					 
					<div class="row">	
						<div class="col-lg-5 col-md-5 col-sm-5"> 						
							<select ng-model="searchForm.attendmeSubEndDateMonth" class="form-control">
								<option value="">-- Month --</option>
								<option ng-repeat="m in months" value="{{m.value}}">{{m.text}}</option>	
								 
							</select>
						</div> 
						<div class="col-lg-5 col-md-5 col-sm-5"> 						
							<select ng-model="searchForm.attendmeSubEndDateYear" class="form-control">
								<option value="">-- Year --</option>
								<option ng-repeat="y in years" value="{{y}}">{{y}}</option>								 
							</select>
						</div>
					</div> 
				</div> 
				 
				<div class="col-lg-4 col-md-4 col-sm-4">
					<label>Warranty Expiry Date</label>
					<div class="row">	
						<div class="col-lg-5 col-md-5 col-sm-5"> 						
							<select ng-model="searchForm.warrantyExpiryDateMonth" class="form-control">
								<option value="">-- Month --</option>
								<option ng-repeat="m in months" value="{{m.value}}">{{m.text}}</option>
							</select>
						</div> 
						<div class="col-lg-5 col-md-5 col-sm-5"> 						
							<select ng-model="searchForm.warrantyExpiryDateYear" class="form-control">
								<option value="">-- Year --</option>
								<option ng-repeat="y in years" value="{{y}}">{{y}}</option>
							</select>
						</div>
					</div>
					 
				</div>
				<div class="col-lg-4 col-md-4 col-sm-4">
					<label>AMC Subscription End Date</label>
					<div class="row">	
						<div class="col-lg-5 col-md-5 col-sm-5"> 						
							<select ng-model="searchForm.amcSubEndDateMonth" class="form-control">
								<option value="">-- Month --</option>
								<option ng-repeat="m in months" value="{{m.value}}">{{m.text}}</option> 
							</select>
						</div> 
						<div class="col-lg-5 col-md-5 col-sm-5"> 						
							<select ng-model="searchForm.amcSubEndDateYear" class="form-control">
								<option value="">-- Year --</option>
								<option ng-repeat="y in years" value="{{y}}">{{y}}</option>
							</select>
						</div>
					</div>
					 
				</div>
			</div>
		</div>
		<br>
		<div class="row">
			<div class="form-group text-center">
				<div class="col-lg-12 col-md-12 col-sm-12">
					<button type="button" class="btn btn-primary btn-sm"
						ng-click="onSubmitSearchForm()"> Search </button>
						&nbsp; &nbsp;
					<button type="button" class="btn btn-danger btn-sm"
						ng-click="onResetSearchForm()"> Reset </button>
				</div>
			</div>
		</div>
	</form>	
		<div class="row">
			<div class="col-lg-12 col-md-12 col-sm-12">
				<hr style="border-color: rgb(221, 221, 221);">
			</div>
		</div>
		
		<div class="row text-right" ng-if="user.role == 'SUPERADMIN' || user.role == 'MANUFACTURERADMIN' || user.role == 'RESELLERADMIN'">
					<div class="col-lg-12 col-md-12 col-sm-12">
						<button type="button" class="btn btn-primary btn-sm" id="btnDownloadAsExcel"
							  ng-click="onDownloadAsExcel()" ng-disabled="subscriptionData.length==0"
							  title="Download As Excel">
							  <i class="glyphicon glyphicon-download"></i> Download As Excel</button>
					</div>
					<br><br>					
		</div>
		
		<div class="row text-center" ng-if="subscriptionData.length==0">
			<br>
			<h5>
				<label>{{searchResultMsg}}</label>
			</h5>
			<br>
		</div>
		
						 
		<div class="table-responsive">
			<table datatable class="table table-bordered" ng-if="subscriptionData.length > 0" style="width: 100%;">
				<thead>
					<tr>
						<td><b>Company Name</b></td>
						<td><b>Company PAN</b></td>
						<td><b>Machine Model</b></td>
						<td><b>Machine Serial</b></td>
						<td><b>Company Location</b></td>
						<td><b>AttendMe Sub Start</b></td>
						<td><b>AttendMe Sub End</b></td>
						<td><b>Installation Date</b></td>
						<td><b>Warranty Expiry Date</b></td>
						<td><b>AMC Sub Start</b></td>
						<td><b>AMC Sub End</b></td>
	
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="sub in subscriptionData track by $index" class="item">
						<td>{{ sub.customerCompanyName }}</td>
						<td>{{ sub.customerCompanyPan }}</td> 
						<td>{{ sub.machineModel }}</td>
						<td>{{ sub.machineSerial }}</td>
						<td>{{ sub.customerLocation }}</td>
						<td>{{ sub.attendMeSubStartDate | date:"dd-MM-yyyy" }}</td>
						<td>{{ sub.attendMeSubEndDate | date:"dd-MM-yyyy" }}</td>
						
						<td>{{ sub.machineInstallationDate | date:"dd-MM-yyyy" }}</td>
						<td>{{ sub.machineWarrantyExpiryDate | date:"dd-MM-yyyy" }}</td>
						
						<td>{{ sub.machineAmcStartDate | date:"dd-MM-yyyy" }}</td>
						<td>{{ sub.machineAmcEndDate | date:"dd-MM-yyyy" }}</td>
						  
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</div>
